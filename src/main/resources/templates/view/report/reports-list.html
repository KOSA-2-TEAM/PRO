<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
    <title>게시판</title>
</head>
<body>
<div class="container">
    <header>
        <h1>▶ 신고글 게시판</h1>
    </header>
    <hr>
    <section id="container">
        <form role="form" method="get">
            <table class="table table-hover">
                <thead>
                <tr>
                    <th>
                        <label>
                            <input type="checkbox" id="allCheckBox" onclick="allChecked()">
                            전체 선택/해제
                        </label>
                    </th>
                    <th>신고 번호</th>
                    <th>게시글 제목</th>
                    <th>신고 내용</th>
                    <th>신고 날짜</th>
                    <th>활성화</th>
                </tr>
                </thead>

                <tr th:if="${#lists.isEmpty(reportsList)}">
                    <td colspan="6" class="text-center">신고 게시글이 없습니다.</td>
                </tr>

                <tbody>
                    <tr th:each="reports : ${reportsList}">
                        <td>
                            <input type="checkbox" class="chk" name="" value="" onclick="chkClicked()" >
                        </td>
                        <td th:text="${reports.reportsIdx}">신고 번호</td>
                        <td>
                            <a th:href="@{/board/{id}(id=${reports.boardIdx.getBoardIdx()})}" th:text="${reports.boardIdx.getTitle()}">게시글 제목</a>
                        </td>
                        <td th:text="${reports.content}">신고 내용</td>
                        <td th:text="${#temporals.format(reports.createdAt, 'yyyy-MM-dd')}">신고 날짜</td>
                        <td th:if="${reports.boardIdx.getStatus()==1}" th:text="O"></td>
                        <td th:if="${reports.boardIdx.getStatus()==0}" th:text="X"></td>
                    </tr>
                </tbody>
            </table>
        </form>
    </section>
</div>
</body>
<script>
    //체크박스 전체 선택 클릭 이chkClicked벤트
    function allChecked(target) {
        const checkbox = document.getElementById('allCheckBox');  //전체 체크박스 버튼
        const is_checked = checkbox.checked; //전체 체크박스 버튼 체크 여부

        //전체 체크박스 제외한 모든 체크박스
        if (is_checked) {  // 체크박스 전체 체크
            chkAllChecked()
        } else { 	     //체크박스 전체 해제
            chkAllUnChecked()
        }
    }

    //자식 체크박스 클릭 이벤트
    function chkClicked() {
        const allCount = document.querySelectorAll(".chk").length; //체크박스 전체개수

        //체크된 체크박스 전체개수
        const query = 'input[name="chk"]:checked'
        const selectedElements = document.querySelectorAll(query)
        const selectedElementsCnt = selectedElements.length;

        //체크박스 전체개수와 체크된 체크박스 전체개수가 같으면 전체 체크박스 체크
        //같지않으면 전체 체크박스 해제
        if (allCount == selectedElementsCnt) {
            document.getElementById('allCheckBox').checked = true;
        } else {
            document.getElementById('allCheckBox').checked = false;
        }
    }

    //체크박스 전체 체크
    function chkAllChecked() {
        document.querySelectorAll(".chk").forEach(function (v, i) {
            v.checked = true;
        });
    }

    //체크박스 전체 체크 해제
    function chkAllUnChecked() {
        document.querySelectorAll(".chk").forEach(function (v, i) {
            v.checked = false;
        });
    }
</script>
</html>