<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>게시글 목록</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

	<style>
		body {
			background-color: #f0f4f8;
			font-family: 'Arial', sans-serif;
			margin: 0;
			padding: 0;
		}

		.container {
			background-color: #ffffff;
			border-radius: 15px;
			box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
			padding: 40px 30px;
			margin-top: 40px;
			max-width: 900px;
			height: 970px;
			max-height: 970px;
		}

		h2 {
			font-size: 2rem;
			color: #333;
			margin-bottom: 20px;
			text-align: center;
			font-weight: 700;
		}

		.search-group {
			display: flex;
			justify-content: space-between;
			margin-bottom: 20px;
			flex-wrap: nowrap; /* 줄 바꿈 방지 */
			gap: 10px;
		}

		.btn-group-left {
			display: flex;
			gap: 10px;
			flex-wrap: nowrap; /* 줄 바꿈 방지 */
		}

		/* 버튼 크기 조정 */
		.btn {
			padding: 10px 15px;
			border-radius: 25px;
			font-size: 0.9rem;
			font-weight: 600;
			text-align: center;
			flex-grow: 1;
			max-width: 200px;
		}

		.btn-primary {
			background-color: #4a90e2;
			border-color: #4a90e2;
		}

		.btn-primary:hover {
			background-color: #357ABD;
		}

		.btn-secondary {
			background-color: #6c757d;
			color: white;
		}

		.btn-secondary:hover {
			background-color: #5a6268;
		}

		.btn-success {
			background-color: #2ecc71;
			border-color: #2ecc71;
			color: white;
		}

		.btn-success:hover {
			background-color: #27ae60;
		}

		.btn-info {
			background-color: #17a2b8;
			border-color: #17a2b8;
			color: white;
		}

		.btn-info:hover {
			background-color: #138496;
		}

		/* 검색 창과 버튼의 정렬 및 크기 조정 */
		.input-group .form-control {
			border-radius: 25px 0 0 25px;
			padding: 10px;
			height: auto;
			font-size: 1rem;
		}

		.input-group .btn {
			border-radius: 0 25px 25px 0;
			padding: 10px 20px;
			height: auto;
			font-size: 1rem;
		}

		/*!* 미디어 쿼리 *!*/
		/*@media (max-width: 768px) {*/
		/*	.search-group, .btn-group-left {*/
		/*		flex-wrap: nowrap; !* 작은 화면에서도 한 줄 유지 *!*/
		/*		overflow-x: auto; !* 화면 크기보다 클 경우 스크롤 *!*/
		/*	}*/

		/*	.btn {*/
		/*		min-width: 100px; !* 최소 버튼 너비 *!*/
		/*	}*/

		/*	.input-group {*/
		/*		gap: 10px;*/
		/*		display: flex;*/
		/*		flex-wrap: nowrap;*/
		/*		width: 100%;*/
		/*	}*/

		/*	.input-group .form-control, .input-group .btn {*/
		/*		width: 100%;*/
		/*		border-radius: 25px;*/
		/*	}*/
		/*}*/

		.table {
			margin-top: 20px;
			background-color: #ffffff;
			border-radius: 12px;
			box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
		}

		thead th {
			background-color: #4a90e2;
			color: white;
			border: none;
			padding: 15px;
			text-align: center;
			font-weight: 700;
		}

		tbody td {
			text-align: center;
			padding: 12px;
			color: #555;
			font-size: 0.95rem;
		}

		tbody tr {
			transition: background-color 0.2s ease-in-out;
		}

		tbody tr:hover {
			background-color: #f1f1f1;
		}

		tbody td a {
			color: #4a90e2;
			text-decoration: none;
			font-weight: 600;
		}

		tbody td a:hover {
			text-decoration: underline;
		}

		.pagination .page-item.active .page-link {
			background-color: #4a90e2;
			border-color: #4a90e2;
		}

		.pagination .page-link {
			color: #4a90e2;
		}

		.pagination .page-item.disabled .page-link {
			color: #ced4da;
		}

		.alert-danger {
			background-color: #f8d7da;
			color: #721c24;
			border-color: #f5c6cb;
			margin-top: 20px;
		}
	</style>
</head>
<body>
<div class="container mt-5">
	<!-- 오류 메시지가 있을 경우 화면에 표시 -->
	<div th:if="${errorMessage}" class="alert alert-danger">
		<p th:text="${errorMessage}"></p>
	</div>

	<!-- 마이페이지 버튼 -->
	<div class="mb-4 d-flex justify-content-start">
		<a th:href="@{/mypage}" class="btn btn-info">마이페이지</a>
	</div>

	<h2 class="mb-4">
		<a th:href="@{/board/list}" style="text-decoration: none; color: inherit;">게시글 목록</a>
	</h2>

	<!-- 카테고리 및 조회수 정렬 버튼, 새 글 작성 버튼 -->
	<div class="search-group">
		<div class="btn-group-left">
			<a th:href="@{/board/list(category='질문', sort=${sort != null ? sort : 'boardIdx'})}" class="btn btn-primary">질문</a>
			<a th:href="@{/board/list(category='정보', sort=${sort != null ? sort : 'boardIdx'})}" class="btn btn-primary">정보</a>
			<a th:href="@{/board/list(category='계획', sort=${sort != null ? sort : 'boardIdx'})}" class="btn btn-primary">계획</a>
			<a th:href="@{/board/list(category='기타', sort=${sort != null ? sort : 'boardIdx'})}" class="btn btn-primary">기타</a>
			<a th:href="@{/board/list(sort=${sort == 'views' ? 'boardIdx' : 'views'}, category=${category != null ? category : ''})}" th:text="${sort == 'views' ? '기본 정렬' : '조회수 순'}" class="btn btn-secondary"></a>
		</div>

		<a th:href="@{/board/create}" class="btn btn-success">새 글 작성</a>
	</div>

	<!-- 검색 폼 -->
	<form th:action="@{/board/list}" method="get" class="mb-4">
		<div class="input-group">
			<input type="text" name="keyword" class="form-control" placeholder="제목 또는 내용으로 검색" th:value="${keyword}">
			<button class="btn btn-outline-secondary" type="submit">검색</button>
		</div>
	</form>

	<!-- 게시글 목록 테이블 -->
	<table class="table table-bordered">
		<thead>
		<tr>
			<th>번호</th>
			<th>제목</th>
			<th>작성자</th>
			<th>조회수</th>
			<th>작성일</th>
			<th>카테고리</th>
		</tr>
		</thead>
		<tbody>
		<!-- 검색 결과가 없는 경우 -->
		<tr th:if="${#lists.isEmpty(boardList)}">
			<td colspan="6" class="text-center">검색 결과가 없습니다.</td>
		</tr>
		<!-- 게시글 목록 출력 -->
		<tr th:each="board : ${boardList}" th:if="${board.status == 1}">
			<td th:text="${board.boardIdx}">1</td>
			<td><a th:href="@{/board/{id}(id=${board.boardIdx})}" th:text="${board.title}">게시글 제목</a></td>
			<td th:text="${board.nickname}">작성자</td>
			<td th:text="${board.views}">0</td>
			<td th:text="${#temporals.format(board.createdAt, 'yyyy-MM-dd')}">작성일</td>
			<td th:text="${board.category}">카테고리</td>
		</tr>
		</tbody>
	</table>

	<!-- Pagination -->
	<div class="d-flex justify-content-center" th:if="${page.totalPages > 1}">
		<ul class="pagination">
			<!-- 이전 버튼 -->
			<li class="page-item" th:classappend="${page.number == 0} ? 'disabled'">
				<a class="page-link" th:href="@{/board/list(page=${page.number - 1}, category=${category != null ? category : ''}, sort=${sort})}">이전</a>
			</li>

			<!-- 페이지 번호 출력 -->
			<li class="page-item" th:each="i : ${#numbers.sequence(1, page.totalPages)}" th:classappend="${i == page.number + 1} ? 'active'">
				<a class="page-link" th:href="@{/board/list(page=${i - 1}, category=${category != null ? category : ''}, sort=${sort})}" th:text="${i}">1</a>
			</li>

			<!-- 다음 버튼 -->
			<li class="page-item" th:classappend="${page.number == page.totalPages - 1} ? 'disabled'">
				<a class="page-link" th:href="@{/board/list(page=${page.number + 1}, category=${category != null ? category : ''}, sort=${sort})}">다음</a>
			</li>
		</ul>
	</div>

</div>

<!-- Bootstrap JS and dependencies -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>
</body>
</html>
